"use strict";(()=>{var u="ANONYMOUS_CUSTOMER_ID",i="CUSTOMER_ID",g=e=>{if(e===null)return;if(localStorage.getItem(i)==="anonymous"&&localStorage.removeItem(i),e.dataset.userId!==""&&e.dataset.userId!==void 0&&e.dataset.userId!=="anonymous"){localStorage.setItem(i,e.dataset.userId);return}let n=localStorage.getItem(u),t=localStorage.getItem(i);if(t!==null){e.dataset.userId=t;return}if(n!==null){e.dataset.userId=n;return}let o=crypto.randomUUID();localStorage.setItem(u,o),e.dataset.userId=o};var s=()=>{let e=f();if(e!==void 0)return e;let n=I();return n!==void 0?n:window.Shopify?.locale!==void 0?window.Shopify.locale:"en"},l=e=>{let n=e??window.Shopify?.locale,t=document.getElementById("dialog-shopify-ai");if(t===null||n===void 0)return;let o=y(n);o!==null&&(t.dataset.locale=n,t.dataset.shopIsoCode=n,t.dataset.language=o.language,t.dataset.countryCode=o.countryCode,window.DIALOG_VARIABLES.locale=n)},m=()=>{let e=document.getElementsByTagName("html")[0];new MutationObserver(()=>{let t=e.getAttribute("lang");t!==null&&l(t)}).observe(e,{attributes:!0,attributeFilter:["lang"]})},y=e=>{try{let n=new Intl.Locale(e),t=n.language,o=n.region??n.maximize().region,a=new Intl.DisplayNames(["en"],{type:"language"}).of(t);return a===void 0||o===void 0?null:{language:a,countryCode:o,formatted:`${t}-${o}`}}catch{return null}},f=()=>{let e=window.location.href;return[...document.querySelectorAll('link[rel="alternate"][hreflang]')].filter(o=>o.getAttribute("hreflang")!=="x-default").find(o=>o.href===e||o.href===e.split("?")[0])?.getAttribute("hreflang")?.slice(0,2)??void 0},I=()=>document.getElementsByTagName("html")[0].getAttribute("lang")?.slice(0,2)??void 0;var L=(e,n)=>{let t=e.replace("#",""),o=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16);return`rgba(${o}, ${r}, ${a}, ${n})`},A=()=>{let e=document.body;e.style.setProperty("--dialog-background-color",window.DIALOG_VARIABLES.backgroundColor),e.style.setProperty("--dialog-primary-color",window.DIALOG_VARIABLES.primaryColor),e.style.setProperty("--dialog-primary-color-alpha",L(window.DIALOG_VARIABLES.primaryColor,.2)),e.style.setProperty("--dialog-cta-text-color",window.DIALOG_VARIABLES.ctaTextColor),e.style.setProperty("--dialog-shop-font-family",window.DIALOG_VARIABLES.fontFamily),e.style.setProperty("--content-font-size",window.DIALOG_PRODUCT_VARIABLES?.contentFontSize!==void 0?`${window.DIALOG_PRODUCT_VARIABLES.contentFontSize}px`:"14px"),e.style.setProperty("--title-font-size",window.DIALOG_PRODUCT_VARIABLES?.titleFontSize!==void 0?`${window.DIALOG_PRODUCT_VARIABLES.titleFontSize}px`:"16px"),e.style.setProperty("--cta-border-type",window.DIALOG_VARIABLES.ctaBorderType==="straight"?"0px":"24px"),e.style.setProperty("--cta-capitalize",window.DIALOG_VARIABLES.capitalizeCtas?"uppercase":"none")},w=e=>{if(e===null)return;new MutationObserver(t=>{t.forEach(o=>{if(o.type==="childList"){let r=document.getElementById("dialog-ai-container");if(r===null)return;S(r),l(s());let d=window.getComputedStyle(r).getPropertyValue("display")==="flex",c=r.dataset.modalState==="MODAL_VIEW"||r.dataset.modalState==="BOOKMARK_VIEW";document.body.style.overflow=d&&!c?"hidden":"visible",document.documentElement.style.overflow=d&&!c?"hidden":"visible"}})}).observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})},S=e=>{window.innerWidth>768||(e.style.top="0px",e.style.height="100dvh")},b=()=>{let e=document.getElementById("dialog-script");if(e===null)return;let n=e.dataset.src;if(n===void 0)return;let t=document.createElement("script");t.setAttribute("src",n),t.setAttribute("type","module"),t.setAttribute("id","dialog-script-body"),document.body.appendChild(t),e.remove()},p=()=>{window.Shopify?.loadFeatures&&window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1"}]),b(),A();let e=document.getElementById("dialog-shopify-ai");e!==null&&(g(e),w(e),l(s()),m())};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();})();
